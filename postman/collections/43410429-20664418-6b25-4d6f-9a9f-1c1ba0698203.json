{
	"info": {
		"_postman_id": "43410429-20664418-6b25-4d6f-9a9f-1c1ba0698203",
		"name": "AddiPi-User-Service",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "me",
			"item": [
				{
					"name": "getCurrentUser",
					"id": "43410429-b2abc6c8-3803-49fd-bf75-d64e41d2b110",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": []
					},
					"response": []
				},
				{
					"name": "getCurrentUserJobs",
					"id": "43410429-2097f64f-a76a-4d24-8083-0b813ab77173",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": []
					},
					"response": []
				},
				{
					"name": "getStats",
					"id": "43410429-72d01e0b-b41c-464e-b086-07628556cab6",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": []
					},
					"response": []
				},
				{
					"name": "editCurrentUser",
					"id": "43410429-dc600afe-8f33-4326-abf7-45cfa00dff7e",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": []
					},
					"response": []
				}
			],
			"id": "43410429-432d909b-3524-44ce-b73a-ba94e00a40aa"
		},
		{
			"name": "users",
			"item": [
				{
					"name": "getAllUsers",
					"id": "43410429-d421ad15-6e8e-48e2-8405-3ae884bf0c59",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{user_url}}/?sort=asc&limit=2",
							"host": [
								"{{user_url}}"
							],
							"path": [
								""
							],
							"query": [
								{
									"key": "sort",
									"value": "asc"
								},
								{
									"key": "limit",
									"value": "2"
								}
							]
						},
						"description": "Title: Get All Users\n\nOverview\nRetrieves a paginated, sortable list of users from the AddiPi User Service.\n\nRequest\n- Method: GET\n- URL: {{user_url}}/?sort=asc&limit=2\n\nQuery Parameters\n- sort (string, optional): Sort order for results. Allowed values: asc, desc. Default: asc.\n- limit (integer, optional): Max number of users to return. Examples: 2, 10, 50. Use 0 to return all (if supported by the service).\n\nAuthentication\n- Typically secured. If this service requires auth, use your existing workspace setup (e.g., Bearer token from AddiPi-Auth Service) via environment variables.\n- Example header when using Bearer token:\n  Authorization: Bearer {{access_token}}\n\nResponse\n- 200 OK (application/json)\n  Example body:\n  {\n    \"users\": [\n      {\n        \"id\": \"user_1764603160153\",\n        \"email\": \"341479@uwr.edu.pl\",\n        \"firstName\": \"Oliwer\",\n        \"lastName\": \"Urbaniak\",\n        \"role\": \"admin\",\n        \"isVerified\": true,\n        \"createdAt\": \"2025-12-01T16:32:40,153Z\",\n        \"updatedAt\": \"2025-12-04T02:29:31,215Z\"\n      }\n      // ...more users\n    ],\n    \"count\": 3\n  }\n\nError Responses (examples)\n- 401 Unauthorized: Missing or invalid credentials.\n- 403 Forbidden: Authenticated but not allowed to list users.\n- 500 Server Error: Unexpected server-side failure.\n\nNotes\n- This request currently has no pre-request or test scripts. Consider adding tests to assert status 200, validate schema of each user object, and check count matches array length.\n- Variables in use: {{user_url}} for base URL.\n\nChange Log\n- 2025-12-04: Initial documentation added."
					},
					"response": []
				},
				{
					"name": "getUserById",
					"id": "43410429-b2f0d3a6-2edf-46c6-9f4f-3c0e71f532a6",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{user_url}}/user_1764603160153",
							"host": [
								"{{user_url}}"
							],
							"path": [
								"user_1764603160153"
							]
						},
						"description": "Get user by ID\n\nSummary  \nRetrieves a single user resource by its unique identifier.\n\nMethod  \nGET\n\nURL  \n{{user_url}}/user_1764603160153\n\nPath / Query Params\n\n- None. The request targets a concrete user resource by ID embedded in the path.\n    \n\nHeaders\n\n- Accept: application/json (recommended)\n    \n\nAuth\n\n- Inherit auth from parent or use the environment’s configured auth if applicable.\n    \n\nResponse\n\n- 200 OK: Returns the user record. Example body:\n    \n    ``` json\n    {\n    \"id\": \"user_1764603160153\",\n    \"email\": \"341479@uwr.edu.pl\",\n    \"firstName\": \"Oliwer\",\n    \"lastName\": \"Urbaniak\",\n    \"role\": \"admin\",\n    \"isVerified\": true,\n    \"createdAt\": \"2025-12-01T16:32:40,153Z\",\n    \"updatedAt\": \"2025-12-03T02:12:21,748Z\",\n    \"_rid\": \"…\",\n    \"_self\": \"…\",\n    \"_etag\": \"…\",\n    \"_attachments\": \"attachments/\",\n    \"_ts\": 1764724343\n    }\n    \n     ```\n    \n- 404 Not Found: User with the specified ID does not exist.\n    \n- 401/403: Authentication or authorization failed (if enforced by the service).\n    \n\nNotes\n\n- The base URL is provided by the environment variable {{user_url}}.\n    \n- This request currently has no pre-request or test scripts and no saved examples. Add tests or examples as needed for monitoring or mocking.\n    \n\nChangelog\n\n- Initial documentation added."
					},
					"response": []
				},
				{
					"name": "updateUserRole",
					"id": "43410429-a99de5fe-445a-4346-813f-09e2d9815e7f",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"role\": \"admin\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{user_url}}/user_1764603160153/role",
							"host": [
								"{{user_url}}"
							],
							"path": [
								"user_1764603160153",
								"role"
							]
						},
						"description": "### Update User Role\n\nPATCH {{user_url}}/user_1764603160153/role\n\nUpdates the role for a specific user. Use this endpoint to promote/demote a user (e.g., to admin). The response returns the full user object reflecting the updated role.\n\n#### Authentication\n\n- Requires authenticated request (e.g., Bearer access token) with sufficient privileges to manage user roles.\n    \n- Inherit auth from parent collection/folder if configured.\n    \n\n#### Path\n\n- userId (embedded in path): `user_1764603160153`\n    \n\n#### Request Body (JSON)\n\n```\n{\n  \"role\": \"admin\"\n}\n\n ```\n\n- role: string (required). Example values: `user`, `admin`. Must match server-allowed roles.\n    \n\n#### Sample Request\n\n```\nPATCH {{user_url}}/user_1764603160153/role\nContent-Type: application/json\n{\n  \"role\": \"admin\"\n}\n\n ```\n\n#### Successful Response (200)\n\n```\n{\n  \"id\": \"user_1764603160153\",\n  \"email\": \"341479@uwr.edu.pl\",\n  \"firstName\": \"Oliwer\",\n  \"lastName\": \"Urbaniak\",\n  \"role\": \"admin\",\n  \"isVerified\": true,\n  \"createdAt\": \"2025-12-01T16:32:40,153Z\",\n  \"updatedAt\": \"2025-12-04T02:17:07,782Z\",\n  \"_rid\": \"JvFmANJMdM0JAAAAAAAAAA==\",\n  \"_self\": \"dbs/JvFmAA==/colls/JvFmANJMdM0=/docs/JvF...\",\n  \"_etag\": \"\\\"7e018946-0000-4700-0000-6930e1090000\\\"\",\n  \"_attachments\": \"attachments/\",\n  \"_ts\": 1764811017\n}\n\n ```\n\n#### Status Codes\n\n- 200 OK: Role updated successfully; returns the updated user.\n    \n- 400 Bad Request: Invalid role value or body schema.\n    \n- 401 Unauthorized: Missing/invalid auth.\n    \n- 403 Forbidden: Authenticated but insufficient privileges to change roles.\n    \n- 404 Not Found: User does not exist.\n    \n- 409 Conflict: Update conflict or role transition not allowed.\n    \n- 429 Too Many Requests: Rate limit exceeded.\n    \n- 500 Internal Server Error: Unexpected server error.\n    \n\n#### Notes\n\n- {{user_url}} is sourced from the active environment (e.g., AddiPi). Ensure it points to the correct User Service base URL.\n    \n- This request currently uses a raw JSON body and no saved tests or examples."
					},
					"response": []
				},
				{
					"name": "updateUserRoleByParams",
					"id": "43410429-4f265afa-946b-4321-af61-9470744d4c39",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "PATCH",
						"header": [],
						"url": {
							"raw": "{{user_url}}/user_1764603160153/role/admin",
							"host": [
								"{{user_url}}"
							],
							"path": [
								"user_1764603160153",
								"role",
								"admin"
							]
						},
						"description": "Purpose  \nPATCH a user’s role to admin. This endpoint elevates an existing user to the admin role.\n\nURL and Path Parameters\n\n- Base URL: {{user_url}} (provided by the active environment)\n    \n- Path: /{userId}/role/{role}\n    - userId: The unique user identifier. In the current example it is user_1764603160153.\n        \n    - role: The target role to assign. In this request it is admin.\n        \n\nVariables Used\n\n- {{user_url}}: Environment variable pointing to the User Service base URL (set in the AddiPi environment). Example: [https://api.example.com/users](https://api.example.com/users)\n    \n\nAuthentication\n\n- Typically requires an authenticated admin or system token. Inherit auth from the parent collection/folder if configured, or set on the request as needed. Ensure the token has permission to update user roles.\n    \n\nRequest\n\n- Method: PATCH\n    \n- Body: none\n    \n\nResponses\n\n- 200 OK: Role successfully updated. Example (captured response):  \n    {  \n    \"id\": \"user_1764603160153\",  \n    \"email\": \"[341479@uwr.edu.pl](https://mailto:341479@uwr.edu.pl)\",  \n    \"firstName\": \"Oliwer\",  \n    \"lastName\": \"Urbaniak\",  \n    \"role\": \"admin\",  \n    \"isVerified\": true,  \n    \"createdAt\": \"2025-12-01T16:32:40,153Z\",  \n    \"updatedAt\": \"2025-12-04T02:29:31,215Z\",  \n    \"_rid\": \"JvFmANJMdM0JAAAAAAAAAA==\",  \n    \"_self\": \"dbs/JvFmAA==/colls/JvFmANJMdM0=/docs/JvF...\",  \n    \"_etag\": \"\"7e01e168-0000-4700-0000-6930e3f30000\"\",  \n    \"_attachments\": \"attachments/\",  \n    \"_ts\": 1764811763  \n    }\n    \n- 400 Bad Request: Invalid role value or malformed userId.\n    \n- 401 Unauthorized / 403 Forbidden: Missing or insufficient auth to modify roles.\n    \n- 404 Not Found: userId does not exist.\n    \n- 409 Conflict: Attempt to set the same role again may be treated as a no-op depending on the service, but some implementations can return conflict.\n    \n- 5xx: Server error from User Service.\n    \n\nIdempotency and Side Effects\n\n- Calling this with role already set to admin should be idempotent (no change in state). The service may still update updatedAt or return the existing resource representation. No resource creation; only a role update.\n    \n\nUsage with Environments and Variables\n\n- Set {{user_url}} in the AddiPi environment to your User Service base URL. Duplicate environments for different stages (e.g., Dev/QA/Prod) and switch the active environment to target the desired stage.\n    \n- To elevate a different user or role, edit the path segments directly in the request URL (or create a path variableized version using a collection-level variable like {{user_id}} and {{target_role}} for reuse in collection runs/monitors)."
					},
					"response": []
				},
				{
					"name": "deleteUser",
					"id": "43410429-d5997c74-9bdc-4e38-8c6d-66f3e35485d6",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJ1c2VyXzE3NjQ2MDMxNjAxNTMiLCJlbWFpbCI6IjM0MTQ3OUB1d3IuZWR1LnBsIiwicm9sZSI6ImFkbWluIiwiaWF0IjoxNzY0ODEzMDM4LCJleHAiOjE3NjQ4MTM5Mzh9.q1IOEGjXk3C6qHD5EdxfgOuqq2ayLMnZr_lvoEz0Dng",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{user_url}}/test2@uwr.edu.pl",
							"host": [
								"{{user_url}}"
							],
							"path": [
								"test2@uwr.edu.pl"
							]
						},
						"description": "Deletes a user by identifier (email or userId).\n\nSummary\n\n- Method: DELETE\n    \n- URL: `{{user_url}}/{identifier}`\n    \n- Identifier can be either:\n    - Email (e.g., `test2@uwr.edu.pl`)\n        \n    - userId (e.g., `user_3432432`)\n        \n- Auth: Bearer token is required (set via the Authorization header).\n    \n\nAuthorization  \nEnsure a valid JWT Bearer token is present. In this workspace, tokens are typically stored in variables or set directly in the request’s Authorization header.\n\nPath parameter\n\n- identifier (string): Accepts either an email or a userId.\n    - Examples:\n        - Email: `{{user_url}}/test2@uwr.edu.pl`\n            \n        - User ID: `{{user_url}}/user_3432432`\n            \n\nResponses\n\n- 200 OK: User deleted successfully. Example response:\n    \n    ``` json\n    {\"message\":\"User deleted successfully\"}\n    \n     ```\n    \n- 401 Unauthorized: Missing or invalid token.\n    \n- 403 Forbidden: Insufficient permissions (requires admin role).\n    \n- 404 Not Found: No user found for the provided identifier.\n    \n\nNotes\n\n- This request uses the `{{user_url}}` environment/collection variable for the service base URL.\n    \n- Deletion is permanent. Confirm the identifier before sending.\n    \n- If both an email and a userId match the same user in your system, the server resolves the path to the user associated with the provided identifier.\n    \n\nExample cURL\n\n``` bash\n# By email\ncurl -X DELETE \"${user_url}/test2@uwr.edu.pl\" \\\n  -H \"Authorization: Bearer <your_jwt_token>\"\n# By userId\ncurl -X DELETE \"${user_url}/user_3432432\" \\\n  -H \"Authorization: Bearer <your_jwt_token>\"\n\n ```"
					},
					"response": []
				},
				{
					"name": "getUserJobs",
					"id": "43410429-68adccb7-3b58-4f2b-8584-b2900c907f5e",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{user_url}}/341479@uwr.edu.pl/jobs",
							"host": [
								"{{user_url}}"
							],
							"path": [
								"341479@uwr.edu.pl",
								"jobs"
							]
						},
						"description": "Purpose\nRetrieve the list of print jobs associated with a specific user email.\n\nRequest\nGET {{user_url}}/{{userEmail}}/jobs\n\nNote: This endpoint also supports an alternative path variant using a userId:\nGET {{user_url}}/users/{{userId}}/jobs\nwhere {{userId}} is the user’s identifier. Both forms are supported and return the same response shape.\n\nPath parameters\n- {{userEmail}} (string, required): The user’s email address. Example: 341479@uwr.edu.pl\n- Alternative: {{userId}} (string, required when using the users/{{userId}}/jobs path): The user’s identifier. Example: user_1764603160153\n\nAuthentication\n- Typically requires a valid Bearer token inherited from the parent folder/collection. Ensure Authorization is set to Bearer Token or inherited. If your API uses a different auth mechanism, configure it at the folder/collection level and let this request inherit it.\n\nQuery parameters\n- None.\n\nRequest body\n- None.\n\nSuccess response (200)\nExample payload based on the last successful response:\n{\n  \"jobs\": [\n    {\n      \"id\": \"1764722864093\",\n      \"fileId\": \"20251203_014648_test.gcode\",\n      \"originalFileName\": \"test.gcode\",\n      \"userId\": \"user_1764603160153\",\n      \"userEmail\": \"341479@uwr.edu.pl\",\n      \"status\": \"pending\",\n      \"scheduledAt\": null,\n      \"createdAt\": \"2025-12-03T01:47:44,093Z\",\n      \"_rid\": \"JvFmAMv1VqoXAAAAAAAAAA==\",\n      \"_self\": \"dbs/JvFmAA==/colls/JvFmAMv1Vqo=/docs/JvF...\",\n      \"_etag\": \"\\\"7e01caef-0000-4700-0000-6930ef430000\\\"\",\n      \"_attachments\": \"attachments/\",\n      \"_ts\": 1764814659\n    }\n  ],\n  \"count\": 1\n}\n\nField notes\n- jobs: Array of job objects.\n- jobs[].status: pending | running | completed | failed (set may vary by system).\n- jobs[].scheduledAt: null or ISO timestamp if scheduled.\n- createdAt: ISO timestamp. Note: example shows a comma in milliseconds (\",093Z\"); actual format may be standard ISO 8601 (e.g., 2025-12-03T01:47:44.093Z).\n- The fields starting with _ (e.g., _rid, _etag, _ts) are metadata from the data store and may be present depending on the backend.\n\nExamples\n- By email: GET https://api.example.com/users/341479@uwr.edu.pl/jobs\n- By userId: GET https://api.example.com/users/user_1764603160153/jobs\n\nPossible error responses\n- 400 Bad Request: Invalid {{userEmail}} or {{userId}} path parameter (depending on which variant is used).\n- 401 Unauthorized: Missing or invalid authentication.\n- 403 Forbidden: Authenticated user is not allowed to access jobs for the specified user.\n- 404 Not Found: No user or jobs found.\n- 429 Too Many Requests: Rate."
					},
					"response": []
				}
			],
			"id": "43410429-c0825be0-4f40-4ff8-b5ae-ff83623db5d9"
		},
		{
			"name": "jobs",
			"item": [
				{
					"name": "getUpcommingJobs",
					"id": "43410429-00cd02b2-ab4c-47c8-b8fd-0c180cee620d",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"description": "Purpose\nRetrieve the list of upcoming print jobs for the currently authenticated user.\n\nHTTP\nGET {{user_url}}/jobs/upcomming\n\nAuthentication\n- Inherits authentication from parent (collection/folder). Ensure a valid user session or bearer token is applied at the folder/collection level.\n\nQuery Parameters\n- None required for this endpoint. Pagination or filters are not currently supported unless added by the backend.\n\nPath/Variable Notes\n- {{user_url}} comes from the active environment and should point to the User Service base URL (for example, https://api.example.com/user). Confirm the variable value in the active environment before sending.\n\nResponses\n- 200 OK: Returns an array of job objects. When no jobs exist, an empty array is returned.\n- 401 Unauthorized: Missing or invalid authentication.\n- 403 Forbidden: Authenticated but not allowed to access these jobs.\n- 5xx Server Error: An error occurred on the server.\n\nResponse Body Structure (200)\nArray<Job>\nJob\n- id: string – Unique job identifier\n- fileId: string – Identifier or filename of the print file (e.g., .gcode)\n- originalFileName: string – Original uploaded filename\n- userId: string – Owner user ID\n- userEmail: string – Owner email\n- status: string – Current job status (e.g., pending, scheduled, printing, completed, failed)\n- scheduledAt: string|null – ISO timestamp when the job is scheduled to start, or null if not yet scheduled\n- createdAt: string – ISO timestamp of job creation\n- _rid, _self, _etag, _attachments, _ts: object/metadata fields from the data store (may be present)\n\nExample (200)\n[\n  {\n    \"id\": \"1764722864093\",\n    \"fileId\": \"20251203_014648_test.gcode\",\n    \"originalFileName\": \"test.gcode\",\n    \"userId\": \"user_1764603160153\",\n    \"userEmail\": \"341479@uwr.edu.pl\",\n    \"status\": \"pending\",\n    \"scheduledAt\": null,\n    \"createdAt\": \"2025-12-03T01:47:44.093Z\",\n    \"_rid\": \"...\",\n    \"_self\": \"...\",\n    \"_etag\": \"...\",\n    \"_attachments\": \"attachments/\",\n    \"_ts\": 1764814659\n  }\n]\n\nNotes\n- The endpoint name includes a likely typo: \"upcomming\". If the backend supports only this path, keep it as is. If both are available, prefer /jobs/upcoming.\n- Time fields are expected to be ISO 8601 strings (Z-ulu)."
					},
					"response": []
				}
			],
			"id": "43410429-f92d49e4-e1bc-446b-b0a3-5e3f7973e830"
		}
	]
}